/**************************************

#!name = PikPakÂ∑•ÂÖ∑
#!desc = ÈöèÊú∫ËÆæÂ§áÁ†ÅÂíåIP
#!author = AAA
#!date = 2024-09-14
**************************************/
const _0x19bc9a=_0x44a3;function _0x44a3(_0x1bd0e1,_0x59e541){const _0x1623d9=_0x16f7();return _0x44a3=function(_0x276f1d,_0x30933f){_0x276f1d=_0x276f1d-0x1de;let _0x12e379=_0x1623d9[_0x276f1d];return _0x12e379;},_0x44a3(_0x1bd0e1,_0x59e541);}(function(_0x363b3b,_0x1fc290){const _0x548d1e=_0x44a3,_0x4b0c29=_0x363b3b();while(!![]){try{const _0x5d7d56=parseInt(_0x548d1e(0x1fe))/0x1*(parseInt(_0x548d1e(0x1f2))/0x2)+parseInt(_0x548d1e(0x1eb))/0x3+-parseInt(_0x548d1e(0x1df))/0x4+parseInt(_0x548d1e(0x1e8))/0x5+-parseInt(_0x548d1e(0x1e9))/0x6+parseInt(_0x548d1e(0x1f5))/0x7*(parseInt(_0x548d1e(0x1f0))/0x8)+-parseInt(_0x548d1e(0x204))/0x9;if(_0x5d7d56===_0x1fc290)break;else _0x4b0c29['push'](_0x4b0c29['shift']());}catch(_0x7fbb06){_0x4b0c29['push'](_0x4b0c29['shift']());}}}(_0x16f7,0x909d2));const $=new Env('pikpak');let devicedId=$['getItem'](_0x19bc9a(0x1fd)),ip=$[_0x19bc9a(0x1e4)]('ip');!devicedId||!ip?(devicedId=generateUUID()[_0x19bc9a(0x1e6)](/-/g,''),ip=getChangeIp(),$['setItem'](_0x19bc9a(0x1fd),devicedId),$[_0x19bc9a(0x1ff)]('ip',ip),$[_0x19bc9a(0x1e2)]('PikPakÂ∑•ÂÖ∑-->\x20È¶ñÊ¨°ÊâßË°åÔºåÁîüÊàêÂπ∂‰øùÂ≠òÈöèÊú∫ËÆæÂ§áÁ†ÅÂíåIP„ÄÇ')):$[_0x19bc9a(0x1e2)]('PikPakÂ∑•ÂÖ∑-->\x20‰ΩøÁî®Â∑≤Â≠òÂÇ®ÁöÑËÆæÂ§áÁ†ÅÂíåIP„ÄÇ');const Headers=$request[_0x19bc9a(0x1ee)]||{};Headers['x-device-id']=devicedId,Headers[_0x19bc9a(0x1f6)]=ip,Headers[_0x19bc9a(0x1f4)]=devicedId,$['log']('ÈöèÊú∫ËÆæÂ§áÁ†Å:',devicedId),$[_0x19bc9a(0x1e2)](_0x19bc9a(0x1e7),ip),$[_0x19bc9a(0x1fc)]({'headers':Headers});function _0x16f7(){const _0x1eb251=['{}.constructor(\x22return\x20this\x22)(\x20)','warn','trace','from','18907965ssPDMD','bind','2437184MLVoVe','return\x20(function()\x20','search','log','constructor','getItem','table','replace','ÈöèÊú∫IP:','5329820IpgKGd','924264hFefcF','apply','1466358hVQnTI','console','info','headers','(((.+)+)+)+$','120JbGVDH','join','16ArzGGe','prototype','x-guid','377517yEYtVE','x-forwarded-for','length','toString','random','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','floor','done','devicedId','136606EkdBoS','setItem'];_0x16f7=function(){return _0x1eb251;};return _0x16f7();}function generateUUID(){const _0x96e534=_0x19bc9a,_0x991196=(function(){let _0x1af5b1=!![];return function(_0x58af90,_0x568302){const _0x575c74=_0x1af5b1?function(){const _0x4d3604=_0x44a3;if(_0x568302){const _0x50bf6d=_0x568302[_0x4d3604(0x1ea)](_0x58af90,arguments);return _0x568302=null,_0x50bf6d;}}:function(){};return _0x1af5b1=![],_0x575c74;};}()),_0x2b265f=_0x991196(this,function(){const _0x48995b=_0x44a3;return _0x2b265f['toString']()['search'](_0x48995b(0x1ef))[_0x48995b(0x1f8)]()[_0x48995b(0x1e3)](_0x2b265f)[_0x48995b(0x1e1)](_0x48995b(0x1ef));});_0x2b265f();const _0x361f2f=(function(){let _0x3f49a4=!![];return function(_0x314b7e,_0xbcab5d){const _0x4e5d2e=_0x3f49a4?function(){const _0x183ae2=_0x44a3;if(_0xbcab5d){const _0x27c44a=_0xbcab5d[_0x183ae2(0x1ea)](_0x314b7e,arguments);return _0xbcab5d=null,_0x27c44a;}}:function(){};return _0x3f49a4=![],_0x4e5d2e;};}()),_0x2aff05=_0x361f2f(this,function(){const _0x5935fe=_0x44a3;let _0x2f6862;try{const _0x546c0d=Function(_0x5935fe(0x1e0)+_0x5935fe(0x200)+');');_0x2f6862=_0x546c0d();}catch(_0x2c9421){_0x2f6862=window;}const _0x238dbc=_0x2f6862[_0x5935fe(0x1ec)]=_0x2f6862['console']||{},_0x1d7606=[_0x5935fe(0x1e2),_0x5935fe(0x201),_0x5935fe(0x1ed),'error','exception',_0x5935fe(0x1e5),_0x5935fe(0x202)];for(let _0x401b87=0x0;_0x401b87<_0x1d7606[_0x5935fe(0x1f7)];_0x401b87++){const _0x29459e=_0x361f2f[_0x5935fe(0x1e3)][_0x5935fe(0x1f3)]['bind'](_0x361f2f),_0x389998=_0x1d7606[_0x401b87],_0x166b7e=_0x238dbc[_0x389998]||_0x29459e;_0x29459e['__proto__']=_0x361f2f['bind'](_0x361f2f),_0x29459e[_0x5935fe(0x1f8)]=_0x166b7e[_0x5935fe(0x1f8)][_0x5935fe(0x1de)](_0x166b7e),_0x238dbc[_0x389998]=_0x29459e;}});return _0x2aff05(),_0x96e534(0x1fa)[_0x96e534(0x1e6)](/[xy]/g,function(_0x132188){const _0x3c573e=_0x96e534,_0x3591ae=Math[_0x3c573e(0x1f9)]()*0x10|0x0,_0x343e7c=_0x132188==='x'?_0x3591ae:_0x3591ae&0x3|0x8;return _0x343e7c[_0x3c573e(0x1f8)](0x10);});}function getChangeIp(){const _0x11d1ee=_0x19bc9a;return Array[_0x11d1ee(0x203)]({'length':0x4},()=>Math[_0x11d1ee(0x1fb)](Math[_0x11d1ee(0x1f9)]()*0x100))[_0x11d1ee(0x1f1)]('.');}
/***************** Env *****************/
function Env(a,b){var c=Math.floor;return new class{constructor(a,b){this.name=a,this.version="1.7.4",this.data=null,this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=new Date().getTime(),Object.assign(this,b),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}platform(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"==typeof module||!module.exports?"undefined"==typeof $task?"undefined"==typeof $loon?"undefined"==typeof $rocket?"undefined"==typeof Egern?void 0:"Egern":"Shadowrocket":"Loon":"Quantumult X":"Node.js"}isQuanX(){return"Quantumult X"===this.platform()}isSurge(){return"Surge"===this.platform()}isLoon(){return"Loon"===this.platform()}isShadowrocket(){return"Shadowrocket"===this.platform()}isStash(){return"Stash"===this.platform()}isEgern(){return"Egern"===this.platform()}toObj(a,b=null){try{return JSON.parse(a)}catch{return b}}toStr(a,b=null){try{return JSON.stringify(a)}catch{return b}}lodash_get(a={},b="",c=void 0){Array.isArray(b)||(b=this.toPath(b));const d=b.reduce((a,b)=>Object(a)[b],a);return d===void 0?c:d}lodash_set(a={},b="",c){return Array.isArray(b)||(b=this.toPath(b)),b.slice(0,-1).reduce((a,c,d)=>Object(a[c])===a[c]?a[c]:a[c]=/^\d+$/.test(b[d+1])?[]:{},a)[b[b.length-1]]=c,a}toPath(a){return a.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}getItem(a=new String,b=null){let c=b;switch(a.startsWith("@")){case!0:const{key:b,path:d}=a.match(/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/)?.groups;a=b;let e=this.getItem(a,{});"object"!=typeof e&&(e={}),c=this.lodash_get(e,d);try{c=JSON.parse(c)}catch(a){}break;default:switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":c=$persistentStore.read(a);break;case"Quantumult X":c=$prefs.valueForKey(a);break;default:c=this.data?.[a]||null}try{c=JSON.parse(c)}catch(a){}}return c??b}setItem(a=new String,b=new String){let c=!1;switch(typeof b){case"object":b=JSON.stringify(b);break;default:b=b+""}switch(a.startsWith("@")){case!0:const{key:d,path:e}=a.match(/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/)?.groups;a=d;let f=this.getItem(a,{});"object"!=typeof f&&(f={}),this.lodash_set(f,e,b),c=this.setItem(a,f);break;default:switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":c=$persistentStore.write(b,a);break;case"Quantumult X":c=$prefs.setValueForKey(b,a);break;default:c=this.data?.[a]||null}}return c}async fetch(a={},b={}){switch(a.constructor){case Object:a={...a,...b};break;case String:a={url:a,...b}}a.method||(a.method=a.body??a.bodyBytes?"POST":"GET"),delete a.headers?.Host,delete a.headers?.[":authority"],delete a.headers?.["Content-Length"],delete a.headers?.["content-length"];const c=a.method.toLocaleLowerCase();switch(this.platform()){case"Loon":case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:return a.policy&&(this.isLoon()&&(a.node=a.policy),this.isStash()&&this.lodash_set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy))),a.followRedirect&&((this.isSurge()||this.isLoon())&&(a["auto-redirect"]=!1),this.isQuanX()&&(a.opts?a.opts.redirection=!1:a.opts={redirection:!1})),a.bodyBytes&&!a.body&&(a.body=a.bodyBytes,delete a.bodyBytes),await new Promise((b,d)=>{$httpClient[c](a,(c,e,f)=>{c?d(c):(e.ok=/^2\d\d$/.test(e.status),e.statusCode=e.status,f&&(e.body=f,!0==a["binary-mode"]&&(e.bodyBytes=f)),b(e))})});case"Quantumult X":return a.policy&&this.lodash_set(a,"opts.policy",a.policy),"boolean"==typeof a["auto-redirect"]&&this.lodash_set(a,"opts.redirection",a["auto-redirect"]),a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete object.body):a.body&&delete a.bodyBytes,await $task.fetch(a).then(a=>(a.ok=/^2\d\d$/.test(a.statusCode),a.status=a.statusCode,a),a=>Promise.reject(a.error))}}time(a,b=null){const d=b?new Date(b):new Date;let e={"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":c((d.getMonth()+3)/3),S:d.getMilliseconds()};for(let c in /(y+)/.test(a)&&(a=a.replace(RegExp.$1,(d.getFullYear()+"").slice(4-RegExp.$1.length))),e)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[c]:("00"+e[c]).slice((""+e[c]).length)));return a}getBaseURL(a){return a.replace(/[?#].*$/,"")}isAbsoluteURL(a){return /^[a-z][a-z0-9+.-]*:/.test(a)}getURLParameters(a){return(a.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((b,a)=>(b[a.slice(0,a.indexOf("="))]=a.slice(a.indexOf("=")+1),b),{})}getTimestamp(a=new Date){return c(a.getTime()/1e3)}queryStr(a){let b=[];for(let c in a)a.hasOwnProperty(c)&&b.push(`${c}=${a[c]}`);let c=b.join("&");return c}queryObj(a){let b={},c=a.split("&");for(let d of c){let a=d.split("="),c=a[0],e=a[1]||"";c&&(b[c]=e)}return b}msg(a=this.name,b="",c="",d){const e=a=>{switch(typeof a){case void 0:return a;case"string":switch(this.platform()){case"Surge":case"Stash":case"Egern":default:return{url:a};case"Loon":case"Shadowrocket":return a;case"Quantumult X":return{"open-url":a}}case"object":switch(this.platform()){case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:{let b=a.url||a.openUrl||a["open-url"];return{url:b}}case"Loon":{let b=a.openUrl||a.url||a["open-url"],c=a.mediaUrl||a["media-url"];return{openUrl:b,mediaUrl:c}}case"Quantumult X":{let b=a["open-url"]||a.url||a.openUrl,c=a["media-url"]||a.mediaUrl,d=a["update-pasteboard"]||a.updatePasteboard;return{"open-url":b,"media-url":c,"update-pasteboard":d}}}default:}};if(!this.isMute)switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(a,b,c,e(d));break;case"Quantumult X":$notify(a,b,c,e(d))}}log(...a){0<a.length&&(this.logs=[...this.logs,...a]),console.log(a.join(this.logSeparator))}logErr(a,b){switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,a,b)}}wait(a){return new Promise(b=>setTimeout(b,a))}done(a={}){const b=new Date().getTime(),c=(b-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${c} Áßí`),this.platform()){case"Surge":a.policy&&this.lodash_set(a,"headers.X-Surge-Policy",a.policy),$done(a);break;case"Loon":a.policy&&(a.node=a.policy),$done(a);break;case"Stash":a.policy&&this.lodash_set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy)),$done(a);break;case"Egern":$done(a);break;case"Shadowrocket":default:$done(a);break;case"Quantumult X":a.policy&&this.lodash_set(a,"opts.policy",a.policy),delete a["auto-redirect"],delete a["auto-cookie"],delete a["binary-mode"],delete a.charset,delete a.host,delete a.insecure,delete a.method,delete a.opt,delete a.path,delete a.policy,delete a["policy-descriptor"],delete a.scheme,delete a.sessionIndex,delete a.statusCode,delete a.timeout,a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete a.body):a.body&&delete a.bodyBytes,$done(a)}}}(a,b)}
